"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var express=require("express"),logger=require("morgan"),bodyParser=require("body-parser"),mongoose=require("mongoose"),user_routes_1=require("./api/routes/user-routes");exports.app=express(),mongoose.connect("mongodb+srv://admin:"+process.env.DATABASEPW+"@database-xtgku.mongodb.net/api-server?retryWrites=true",{useNewUrlParser:!0}),this.app.use(logger("dev")),this.app.use(bodyParser.urlencoded({extended:!1})),this.app.use(bodyParser.json()),this.app.use(function(e,s,r){if(console.log("qdwqwe"),s.header("Access-Control-Allow-Origin","*"),s.header("Access-Control-Allow-headers","Orgin, X-Requested-With, Content-Type, Accept, Authorization"),"OPTIONS"===e.method)return s.header("Access-Control-Allow-Methods","PUT, POST, PATCH, DELETE, GET"),s.status(200).json({});r()}),this.app.use("/users",user_routes_1.userRoutes),this.app.use(function(e,s,r){var o=new Error("Not found");o.status=404,r(o)}),this.app.use(function(e,s,r,o){r.status(e.status||500),r.json({error:{message:e.message}})});